<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Market Terminal</title>
  <link rel="stylesheet" href="/static/style.css" />
  <script src="https://s3.tradingview.com/tv.js"></script>
</head>
<body class="theme-dark">
  <header class="top-bar">
    <div class="brand">MARKET TERMINAL</div>

    <div class="ticker-bar" id="ticker-bar">
      <div class="ticker-track" id="ticker-track"></div>
    </div>

    <div class="top-actions">
      <div class="menu-wrapper">
        <button id="menu-toggle" class="menu-button">Menu ‚ñæ</button>
        <div id="menu-panel" class="menu-panel">
          <div class="menu-section">
            <div class="menu-label">Theme</div>
            <div class="theme-toggle">
              <span class="theme-icon">üåô</span>
              <label class="switch">
                <input type="checkbox" id="theme-toggle" />
                <span class="slider"></span>
              </label>
              <span class="theme-icon">‚òÄÔ∏è</span>
            </div>
          </div>

          <div class="menu-section">
            <div class="menu-label">Shortcuts</div>
            <button class="shortcut-btn" data-symbol="OANDA:US500USD">
              S&amp;P 500 (US500)
            </button>
            <button class="shortcut-btn" data-symbol="OANDA:NAS100USD">
              NASDAQ 100 (NAS100)
            </button>
          </div>

          <div class="menu-section">
            <div class="menu-label">Tiles</div>
            <label class="tile-toggle">
              <input type="checkbox" class="tile-checkbox" data-tile="chart" checked />
              <span>Chart</span>
            </label>
            <label class="tile-toggle">
              <input type="checkbox" class="tile-checkbox" data-tile="news" checked />
              <span>News</span>
            </label>
            <label class="tile-toggle">
              <input type="checkbox" class="tile-checkbox" data-tile="insights" checked />
              <span>Market Insights</span>
            </label>
            <label class="tile-toggle">
              <input type="checkbox" class="tile-checkbox" data-tile="macro" checked />
              <span>Macro Maps</span>
            </label>
            <label class="tile-toggle">
              <input type="checkbox" class="tile-checkbox" data-tile="calendar" checked />
              <span>Economic Calendar</span>
            </label>
            <label class="tile-toggle">
              <input type="checkbox" class="tile-checkbox" data-tile="movers" checked />
              <span>Top Movers</span>
            </label>
          </div>

          <div class="menu-section">
            <div class="menu-label">Tools</div>
            <button id="heatmap-link" class="shortcut-btn">S&amp;P 500 Heatmap</button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="layout">
    <!-- Row 1: chart + news -->
    <section class="row" data-row="1">
      <article class="tile" id="tile-chart">
        <header class="tile-header">
          <h2 id="chart-title">Chart ‚Äì AAPL</h2>
          <button class="tile-close" data-tile="chart">‚àí</button>
        </header>
        <div class="tile-body chart-body">
          <div id="tv-chart" class="tv-chart"></div>
        </div>
      </article>

      <div class="col-resizer" data-resizer="1"></div>

      <article class="tile" id="tile-news">
        <header class="tile-header">
          <h2>News ‚Äì <span id="news-symbol">AAPL</span></h2>
          <button class="tile-close" data-tile="news">‚àí</button>
        </header>
        <div class="tile-body news-body">
          <div id="news-list" class="news-list">
            <div class="placeholder">Loading news‚Ä¶</div>
          </div>
        </div>
      </article>
    </section>

    <div class="row-resizer" data-row="1"></div>

    <!-- Row 2: insights + macro -->
    <section class="row" data-row="2">
      <article class="tile" id="tile-insights">
        <header class="tile-header">
          <h2>Market Insights: <span id="insights-symbol">AAPL</span></h2>
          <button class="tile-close" data-tile="insights">‚àí</button>
        </header>
        <div class="tile-body insights-body">
          <div class="insights-grid">
            <div class="insight-cell">
              <div class="insight-label">1W</div>
              <div class="insight-value" id="insight-1W">‚Äî</div>
            </div>
            <div class="insight-cell">
              <div class="insight-label">1M</div>
              <div class="insight-value" id="insight-1M">‚Äî</div>
            </div>
            <div class="insight-cell">
              <div class="insight-label">3M</div>
              <div class="insight-value" id="insight-3M">‚Äî</div>
            </div>
            <div class="insight-cell">
              <div class="insight-label">6M</div>
              <div class="insight-value" id="insight-6M">‚Äî</div>
            </div>
            <div class="insight-cell">
              <div class="insight-label">YTD</div>
              <div class="insight-value" id="insight-YTD">‚Äî</div>
            </div>
            <div class="insight-cell">
              <div class="insight-label">1Y</div>
              <div class="insight-value" id="insight-1Y">‚Äî</div>
            </div>
          </div>
          <p class="insights-note" id="insights-note">
            No performance snapshot.
          </p>
        </div>
      </article>

      <div class="col-resizer" data-resizer="2"></div>

      <article class="tile" id="tile-macro">
        <header class="tile-header">
          <h2>Macro Maps</h2>
          <button class="tile-close" data-tile="macro">‚àí</button>
        </header>
        <div class="tile-body macro-body">
          <p class="macro-text">
            TradingView‚Äôs Macro Maps page cannot be embedded directly (their
            website blocks iframes), but you can open the full interactive map
            in a new tab:
          </p>
          <div class="macro-links">
            <a href="https://www.tradingview.com/macro/" target="_blank" rel="noreferrer">
              Open TradingView Macro Maps
            </a>
          </div>
        </div>
      </article>
    </section>

    <div class="row-resizer" data-row="2"></div>

    <!-- Row 3: calendar + movers -->
    <section class="row" data-row="3">
      <article class="tile" id="tile-calendar">
        <header class="tile-header">
          <h2>Economic Calendar (US)</h2>
          <button class="tile-close" data-tile="calendar">‚àí</button>
        </header>
        <div class="tile-body calendar-body">
          <!-- TradingView official events widget (no iframe issues) -->
          <div class="tradingview-widget-container">
            <div class="tradingview-widget-container__widget" id="tv-calendar-widget"></div>
          </div>
        </div>
      </article>

      <div class="col-resizer" data-resizer="3"></div>

      <article class="tile" id="tile-movers">
        <header class="tile-header">
          <h2>Top Movers (Watchlist)</h2>
          <button class="tile-close" data-tile="movers">‚àí</button>
        </header>
        <div class="tile-body movers-body">
          <div class="movers-columns">
            <div>
              <h3>Top Gainers</h3>
              <ul id="gainers-list" class="movers-list"></ul>
            </div>
            <div>
              <h3>Top Losers</h3>
              <ul id="losers-list" class="movers-list"></ul>
            </div>
          </div>
        </div>
      </article>
    </section>
  </main>

  <!-- TradingView calendar widget script (keeps loading even with theme changes) -->
  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-events.js" async>
  {
    "width": "100%",
    "height": "100%",
    "colorTheme": "dark",
    "isTransparent": true,
    "locale": "en",
    "importanceFilter": "-1,0,1",
    "country": "US"
  }
  </script>

  <script src="/static/main.js"></script>
</body>
</html>
