<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <title>Market Terminal</title>
  <link rel="stylesheet" href="/static/style.css" />
  <!-- TradingView widget loader -->
  <script src="https://s3.tradingview.com/tv.js"></script>
  <!-- D3 for macro maps -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
  <div id="app">
    <!-- Top bar -->
    <header class="top-bar">
      <div class="top-left">
        <span class="logo-text">MARKET TERMINAL</span>
      </div>

      <div class="ticker-bar">
        <div id="ticker-marquee" class="ticker-marquee"></div>
      </div>

      <div class="top-right">
        <button id="menu-button" class="menu-button">Menu ‚ñæ</button>
        <div id="menu-dropdown" class="menu-dropdown hidden">
          <div class="menu-section">
            <div class="menu-label">
              <span>Theme</span>
              <div class="theme-toggle">
                <!-- Sun left, moon right -->
                <span class="theme-icon">‚òÄÔ∏è</span>
                <label class="switch">
                  <input type="checkbox" id="theme-toggle" />
                  <span class="slider"></span>
                </label>
                <span class="theme-icon">üåô</span>
              </div>
            </div>
          </div>

          <div class="menu-section">
            <div class="menu-label">Shortcuts</div>
            <button class="menu-shortcut" data-symbol="AMEX:SPY" data-label="SPY">
              S&amp;P 500 (SPY)
            </button>
            <button class="menu-shortcut" data-symbol="NASDAQ:QQQ" data-label="QQQ">
              NASDAQ 100 (QQQ)
            </button>
          </div>

          <div class="menu-section">
            <div class="menu-label">Tiles</div>
            <label class="menu-checkbox">
              <input type="checkbox" data-tile="news-tile" checked /> News
            </label>
            <label class="menu-checkbox">
              <input type="checkbox" data-tile="insights-tile" checked /> Market Insights
            </label>
            <label class="menu-checkbox">
              <input type="checkbox" data-tile="macro-tile" checked /> Macro Maps
            </label>
            <label class="menu-checkbox">
              <input type="checkbox" data-tile="calendar-tile" checked /> Economic Calendar
            </label>
            <label class="menu-checkbox">
              <input type="checkbox" data-tile="movers-tile" checked /> Top Movers
            </label>
          </div>

          <div class="menu-section">
            <div class="menu-label">Tools</div>
            <button id="heatmap-link" class="menu-link">
              Open S&amp;P 500 Heatmap
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Main layout -->
    <main class="layout">
      <!-- Row 1: Chart + News -->
      <section class="row row-large" id="row-1">
        <div class="tile chart-tile" id="chart-tile">
          <div class="tile-header">
            <span id="chart-title">Chart ‚Äì AAPL</span>
          </div>
          <div id="tv-chart" class="tv-chart"></div>
        </div>

        <div class="tile news-tile" id="news-tile">
          <div class="tile-header">
            <span id="news-title">News ‚Äì AAPL</span>
          </div>
          <div class="tile-body scrollable" id="news-list">
            <div class="placeholder">Loading news‚Ä¶</div>
          </div>
        </div>
      </section>

      <!-- Row 2: Market Insights + Macro Maps -->
      <section class="row row-medium" id="row-2">
        <div class="tile" id="insights-tile">
          <div class="tile-header">
            <span id="insights-title">Market Insights: AAPL</span>
          </div>
          <div class="tile-body">
            <div class="insights-grid" id="insights-grid">
              <!-- performance boxes populated by JS -->
            </div>
            <p class="insights-description" id="insights-description">
              No performance snapshot yet.
            </p>
          </div>
        </div>

        <div class="tile" id="macro-tile">
          <div class="tile-header">
            <span>Macro Maps</span>
          </div>
          <div class="tile-body">
            <div id="macro-map" class="macro-map"></div>
            <div id="macro-legend" class="macro-legend"></div>
          </div>
        </div>
      </section>

      <!-- Row 3: Economic Calendar + Movers -->
      <section class="row row-medium" id="row-3">
        <div class="tile" id="calendar-tile">
          <div class="tile-header">
            <span>Economic Calendar (US)</span>
          </div>
          <div class="tile-body scrollable" id="calendar-body">
            <div class="placeholder">Loading calendar‚Ä¶</div>
          </div>
        </div>

        <div class="tile" id="movers-tile">
          <div class="tile-header">
            <span>Top Movers (Watchlist)</span>
          </div>
          <div class="tile-body movers-body">
            <div class="movers-column">
              <h4>Top Gainers</h4>
              <ul id="gainers-list"></ul>
            </div>
            <div class="movers-column">
              <h4>Top Losers</h4>
              <ul id="losers-list"></ul>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="/static/main.js"></script>
</body>
</html>
